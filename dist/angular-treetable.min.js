/**
 * angular-treetable
 * @version v0.1.0 - 2014-05-15
 * @link http://github.com/garrettheel/angular-treetable
 * @author Garrett Heel (garrettheel@gmail.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("ngTreetable",[]).directive("ttTable",["$compile","$templateCache",function(a,b){return{restrict:"EAC",scope:{template:"=",nodes:"=",afterInit:"="},link:function(c,d){function e(d,e){var f=angular.isFunction(c.template)?c.template(d):c.template,g=b.get(f),h=c.$parent.$new();return h.node=d,h._ttParent=e,a(g)(h)}function f(a){var b=a?a.scope().node:null,f=a?a.data("ttId"):null;a&&(a.scope().loading=!0),c.nodes(b).then(function(b){var g=[];angular.forEach(b,function(a){var b=e(a,f);g.push(b.get(0))});var h=null!=f?d.treetable("node",f):null;d.treetable("loadBranch",h,g),a&&(a.scope().loading=!1),null==a&&angular.isFunction(c.afterInit)&&c.afterInit()})}function g(){this.row.scope().loading||(d.treetable("unloadBranch",this),f(this.row))}function h(){this.row.scope().loading||d.treetable("unloadBranch",this)}d.treetable({expandable:!0,onNodeExpand:g,onNodeCollapse:h}),f(null)}}}]).directive("ttNode",[function(){var a=0;return{restrict:"EAC",scope:{isBranch:"=",parent:"="},link:function(b,c){var d=angular.isDefined(b.isBranch)?b.isBranch:!0,e=angular.isDefined(b.parent)?b.parent:b.$parent._ttParent;c.attr("data-tt-id",a++),c.attr("data-tt-branch",d),c.attr("data-tt-parent-id",e)}}}]);